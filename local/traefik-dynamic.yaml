# Traefik Dynamic Configuration

http:
  # Routers
  routers:
    backend:
      rule: "PathPrefix(`/instance`) || PathPrefix(`/health`)"
      service: backend
      entryPoints:
        - web

  # Services
  services:
    backend:
      loadBalancer:
        # Define all 3 backend servers using Docker network DNS
        # Docker Compose creates containers with names: <project>-<service>-<replica>
        servers:
          - url: "http://reference-service-go-backend-1:8080"
          - url: "http://reference-service-go-backend-2:8080"
          - url: "http://reference-service-go-backend-3:8080"
        
        # Health check configuration
        healthCheck:
          path: "/health/live"
          interval: "10s"
          timeout: "3s"
